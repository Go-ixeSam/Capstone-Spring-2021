{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sam\\\\Documents\\\\GitHub\\\\Capstone-Spring-2021\\\\src\\\\views\\\\Wikipedia.jsx\";\nimport React from \"react\";\nimport { isTemplateMiddleOrTemplateTail } from \"typescript\";\nimport useForceUpdate from \"use-force-update\";\nimport \"./Wiki.css\";\nimport { wikiVegetableSearch } from \"redux/index\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getWikiResult, getVegetableAPIloadingTime } from \"redux/Selector/Selectors\";\nimport LoadingSpinner, { SwitchSpinner } from \"components/LoadingSpinner/LoadingSpinner\";\n\nfunction Wikipedia() {\n  const [wikiSearchReturnValues, setWikiSearchReturnValues] = React.useState([]);\n  const [wikiSearchTerms, setWikiSearchTerms] = React.useState(\"\");\n  const forceUpdate = useForceUpdate();\n  const dispatch = useDispatch(); // const vegetableList = useSelector((state) => getWikiResult(state));\n\n  const loading = useSelector(state => getVegetableAPIloadingTime(state));\n\n  const useWikiSearchEngine = e => {\n    e.preventDefault();\n    setWikiSearchReturnValues([]);\n    let vegetableList = {};\n\n    const search = async () => {\n      const result = await dispatch(wikiVegetableSearch(wikiSearchTerms));\n      console.log(\"result= \", result);\n\n      if (!result.error) {\n        vegetableList = await result.payload.data;\n      } else {\n        vegetableList = [];\n      }\n\n      const tmp = [];\n\n      for (let key in vegetableList) {\n        tmp.push({\n          title: vegetableList[key].title,\n          image: vegetableList[key].image\n        });\n      }\n\n      console.log(\"leak wiki= \", tmp);\n      setWikiSearchReturnValues(tmp); // forceUpdate();\n      //   for (var key in ) {\n      //     tmp.push({\n      //       queryResultPageFullURL: \"no link\",\n      //       queryResultPageID: response.query.search[key].pageid,\n      //       queryResultPageTitle: response.query.search[key].title,\n      //       queryResultPageSnippet: response.query.search[key].snippet,\n      //     });\n      //   }\n      //   setWikiSearchReturnValues(tmp)\n      // }\n      // fetch(url)\n      //   .then(function (response) {\n      //     return response.json();\n      //   })\n      //   .then(function (response) {\n      //     // console.log(response);\n      //   })\n      //   .then(function (response) {\n      //     for (var key2 in wikiSearchReturnValues) {\n      //       console.log(\"array\",wikiSearchReturnValues);\n      //       console.log(\"key 2, \",key2)\n      //       // let page = pointerToThis.state.wikiSearchReturnValues[key2];\n      //       setWikiSearchReturnValues(wikiSearchReturnValues[key2])\n      //       let page = wikiSearchReturnValues;\n      //       let pageID = page.queryResultPageID;\n      //       let urlForRetrievingPageURLByPageID = `https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=info&pageids=${pageID}&inprop=url&format=json`;\n      //       fetch(urlForRetrievingPageURLByPageID)\n      //         .then(function (response) {\n      //           return response.json();\n      //         })\n      //         .then(function (response) {\n      //           page.queryResultPageFullURL =\n      //             response.query.pages[pageID].fullurl;\n      //           //   pointerToThis.forceUpdate();\n      //           forceUpdate();\n      //         });\n      //     }\n      //   });\n    };\n\n    search();\n  };\n\n  const changeWikiSearchTerms = e => {\n    console.log(\"value search= \", e.target.value);\n    setWikiSearchTerms(e.target.value);\n  };\n\n  let wikiSearchResults = [];\n\n  for (var key in wikiSearchReturnValues) {\n    wikiSearchResults.push( /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchResultDiv\",\n      key: key,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: wikiSearchReturnValues[key].image,\n      alt: \"\",\n      height: 50,\n      width: 50,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, wikiSearchReturnValues[key].title)));\n  }\n\n  console.log(wikiSearchResults);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, \"Wikipedia Search Engine\"), /*#__PURE__*/React.createElement(\"form\", {\n    action: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: wikiSearchTerms || \"\",\n    onChange: changeWikiSearchTerms,\n    placeholder: \"Search Wikipedia Articles\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: useWikiSearchEngine,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \"Search\")), /*#__PURE__*/React.createElement(SwitchSpinner, {\n    show: loading,\n    size: 50,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }), setWikiSearchReturnValues.length != 0 ? wikiSearchResults : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, \"Kh\\xF4ng c\\xF3 k\\u1EBFt qu\\u1EA3\"));\n}\n\nexport default Wikipedia;","map":{"version":3,"sources":["C:/Users/Sam/Documents/GitHub/Capstone-Spring-2021/src/views/Wikipedia.jsx"],"names":["React","isTemplateMiddleOrTemplateTail","useForceUpdate","wikiVegetableSearch","useDispatch","useSelector","getWikiResult","getVegetableAPIloadingTime","LoadingSpinner","SwitchSpinner","Wikipedia","wikiSearchReturnValues","setWikiSearchReturnValues","useState","wikiSearchTerms","setWikiSearchTerms","forceUpdate","dispatch","loading","state","useWikiSearchEngine","e","preventDefault","vegetableList","search","result","console","log","error","payload","data","tmp","key","push","title","image","changeWikiSearchTerms","target","value","wikiSearchResults","length"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { isTemplateMiddleOrTemplateTail } from \"typescript\";\r\nimport useForceUpdate from \"use-force-update\";\r\nimport \"./Wiki.css\";\r\nimport { wikiVegetableSearch } from \"redux/index\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  getWikiResult,\r\n  getVegetableAPIloadingTime,\r\n} from \"redux/Selector/Selectors\";\r\nimport LoadingSpinner, {\r\n  SwitchSpinner,\r\n} from \"components/LoadingSpinner/LoadingSpinner\";\r\n\r\nfunction Wikipedia() {\r\n  const [wikiSearchReturnValues, setWikiSearchReturnValues] = React.useState(\r\n    []\r\n  );\r\n  const [wikiSearchTerms, setWikiSearchTerms] = React.useState(\"\");\r\n  const forceUpdate = useForceUpdate();\r\n  const dispatch = useDispatch();\r\n  // const vegetableList = useSelector((state) => getWikiResult(state));\r\n  const loading = useSelector((state) => getVegetableAPIloadingTime(state));\r\n\r\n  const useWikiSearchEngine = (e) => {\r\n    e.preventDefault();\r\n    setWikiSearchReturnValues([]);\r\n    let vegetableList = {};\r\n    const search = async () => {\r\n      const result = await dispatch(wikiVegetableSearch(wikiSearchTerms));\r\n      console.log(\"result= \", result);\r\n      if (!result.error) {\r\n        vegetableList = await result.payload.data;\r\n      } else {\r\n        vegetableList = [];\r\n      }\r\n      const tmp = [];\r\n      for (let key in vegetableList) {\r\n        tmp.push({\r\n          title: vegetableList[key].title,\r\n          image: vegetableList[key].image,\r\n        });\r\n      }\r\n      console.log(\"leak wiki= \", tmp);\r\n      setWikiSearchReturnValues(tmp);\r\n      // forceUpdate();\r\n      //   for (var key in ) {\r\n      //     tmp.push({\r\n      //       queryResultPageFullURL: \"no link\",\r\n      //       queryResultPageID: response.query.search[key].pageid,\r\n      //       queryResultPageTitle: response.query.search[key].title,\r\n      //       queryResultPageSnippet: response.query.search[key].snippet,\r\n      //     });\r\n      //   }\r\n      //   setWikiSearchReturnValues(tmp)\r\n      // }\r\n      // fetch(url)\r\n      //   .then(function (response) {\r\n      //     return response.json();\r\n      //   })\r\n      //   .then(function (response) {\r\n      //     // console.log(response);\r\n\r\n      //   })\r\n      //   .then(function (response) {\r\n      //     for (var key2 in wikiSearchReturnValues) {\r\n      //       console.log(\"array\",wikiSearchReturnValues);\r\n      //       console.log(\"key 2, \",key2)\r\n      //       // let page = pointerToThis.state.wikiSearchReturnValues[key2];\r\n      //       setWikiSearchReturnValues(wikiSearchReturnValues[key2])\r\n      //       let page = wikiSearchReturnValues;\r\n      //       let pageID = page.queryResultPageID;\r\n      //       let urlForRetrievingPageURLByPageID = `https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=info&pageids=${pageID}&inprop=url&format=json`;\r\n\r\n      //       fetch(urlForRetrievingPageURLByPageID)\r\n      //         .then(function (response) {\r\n      //           return response.json();\r\n      //         })\r\n      //         .then(function (response) {\r\n      //           page.queryResultPageFullURL =\r\n      //             response.query.pages[pageID].fullurl;\r\n\r\n      //           //   pointerToThis.forceUpdate();\r\n      //           forceUpdate();\r\n      //         });\r\n      //     }\r\n      //   });\r\n    };\r\n    search();\r\n  };\r\n  const changeWikiSearchTerms = (e) => {\r\n    console.log(\"value search= \", e.target.value);\r\n    setWikiSearchTerms(e.target.value);\r\n  };\r\n\r\n  let wikiSearchResults = [];\r\n  for (var key in wikiSearchReturnValues) {\r\n    wikiSearchResults.push(\r\n      <div className=\"searchResultDiv\" key={key}>\r\n        <img src={wikiSearchReturnValues[key].image} alt=\"\" height={50} width={50}/>\r\n        <h3>{wikiSearchReturnValues[key].title}</h3>\r\n      </div>\r\n    );\r\n  }\r\n  console.log(wikiSearchResults);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>Wikipedia Search Engine</h1>\r\n      <form action=\"\">\r\n        <input\r\n          type=\"text\"\r\n          value={wikiSearchTerms || \"\"}\r\n          onChange={changeWikiSearchTerms}\r\n          placeholder=\"Search Wikipedia Articles\"\r\n        />\r\n        <button type=\"submit\" onClick={useWikiSearchEngine}>\r\n          Search\r\n        </button>\r\n      </form>\r\n      <SwitchSpinner show={loading} size={50} />\r\n      {setWikiSearchReturnValues.length != 0 ? (\r\n        wikiSearchResults\r\n      ) : (\r\n        <p>Không có kết quả</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Wikipedia;\r\n"]},"metadata":{},"sourceType":"module"}