{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Sam\\\\Documents\\\\GitHub\\\\Capstone-Spring-2021\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Sam\\\\Documents\\\\GitHub\\\\Capstone-Spring-2021\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Sam\\\\Documents\\\\GitHub\\\\Capstone-Spring-2021\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:\\\\Users\\\\Sam\\\\Documents\\\\GitHub\\\\Capstone-Spring-2021\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _taggedTemplateLiteral from\"C:\\\\Users\\\\Sam\\\\Documents\\\\GitHub\\\\Capstone-Spring-2021\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  font-size: 14px;\\n  margin: 0px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import{faLock,faLockOpen}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{Box,TableFooter,Checkbox}from\"@material-ui/core\";import IconButton from\"@material-ui/core/IconButton\";import Paper from\"@material-ui/core/Paper\";import{lighten,makeStyles}from\"@material-ui/core/styles\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableContainer from\"@material-ui/core/TableContainer\";import TablePagination from\"@material-ui/core/TablePagination\";import TableRow from\"@material-ui/core/TableRow\";import Toolbar from\"@material-ui/core/Toolbar\";import Tooltip from\"@material-ui/core/Tooltip\";import Typography from\"@material-ui/core/Typography\";import DeleteIcon from\"@material-ui/icons/Delete\";import{setVisible}from\"redux/index\";import TextButton from\"components/MaterialComponent/TextButton\";import FilterListIcon from\"@material-ui/icons/FilterList\";import clsx from\"clsx\";import{useFormik}from\"formik\";import React from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import styled from\"styled-components\";import{DeleteButton,UnclockButton}from\"../../components/CustomButton/CustomButton\";import SearchOption from\"../../components/FilterOption/SearchOption/SearchBar\";import{getLocked,removeAdvanceRecordSelected,setSelectedAccountID}from\"../../redux\";import{getAdvanceData,getAdvanceDataByNameSearch,removeAdvanceRecord,getReportedListByAccountId}from\"../../redux/Selector/Selectors\";import*as variable from\"../../variables/Variables\";import EnhancedTableHead from\"../SuperTable/Header/AdvanceHeader\";import{StyledTableCell}from\"./StyledCell\";import{StyledTableRow}from\"./StyledRow\";import ActionButton from\"components/SuperTable/ActionButton\";var NormalPElement=styled.p(_templateObject());var normalPElement={fontSize:14,margin:0};function descendingComparator(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function getComparator(order,orderBy){return order===\"desc\"?function(a,b){return descendingComparator(a,b,orderBy);}:function(a,b){return-descendingComparator(a,b,orderBy);};}function stableSort(array,comparator){var stabilizedThis=array.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){var order=comparator(a[0],b[0]);if(order!==0)return order;return a[1]-b[1];});return stabilizedThis.map(function(el){return el[0];});}var useToolbarStyles=makeStyles(function(theme){return{root:{paddingLeft:theme.spacing(2),paddingRight:theme.spacing(1)},highlight:theme.palette.type===\"light\"?{color:theme.palette.secondary.main,backgroundColor:lighten(theme.palette.secondary.light,0.85)}:{color:theme.palette.text.primary,backgroundColor:theme.palette.secondary.dark},title:{flex:\"1 1 100%\"}};});var EnhancedTableToolbar=function EnhancedTableToolbar(props){var classes=useToolbarStyles();var numSelected=props.numSelected;return/*#__PURE__*/React.createElement(Toolbar,{className:clsx(classes.root,_defineProperty({},classes.highlight,numSelected>0))},numSelected>0?/*#__PURE__*/React.createElement(Typography,{className:classes.title,color:\"inherit\",variant:\"subtitle1\",component:\"div\"},numSelected,\" selected\"):/*#__PURE__*/React.createElement(Typography,{className:classes.title,variant:\"h6\",id:\"tableTitle\",component:\"div\"},\"Nutrition\"),numSelected>0?/*#__PURE__*/React.createElement(Tooltip,{title:\"Delete\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"delete\"},/*#__PURE__*/React.createElement(DeleteIcon,null))):/*#__PURE__*/React.createElement(Tooltip,{title:\"Filter list\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"filter list\"},/*#__PURE__*/React.createElement(FilterListIcon,null))));};var useStyles=makeStyles(function(theme){return{root:{width:\"100%\",\"& .MuiSelect-root\":{fontSize:14,margin:0}},paper:{width:\"100%\",marginBottom:theme.spacing(2)},table:{// fontSize:14,\nminWidth:750,borderCollapse:\"collapse\"},visuallyHidden:{border:0,clip:\"rect(0 0 0 0)\",height:1,margin:-1,overflow:\"hidden\",padding:0,position:\"absolute\",top:20,width:1}};});export default function EnhancedTable(props){var headCells=props.headCells;var classes=useStyles();// ! row này sẽ đại diện cho dữ liệu lấy trực tiếp từ store (global)\nvar rowWithDataFromStore=props.bodyData;var actionButtonList=props.actionbuttonlist;// * cái row ở bên store truyền từ bên component vào\nvar _React$useState=React.useState(props.bodyData),_React$useState2=_slicedToArray(_React$useState,2),rows=_React$useState2[0],setRows=_React$useState2[1];// const rows =props.bodyData;\n//* cái row ở trực tiếp bên store luôn\nvar directRowBody=useSelector(function(state){return getAdvanceData(state);});var dispatch=useDispatch();var history=useHistory();// ! history object\n// * Dùng để đánh dấu account đang bị lock\nvar _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),isLock=_React$useState4[0],setIsLock=_React$useState4[1];// ! Dùng để kiểm tra sự thay đổi của  const rowWithDataFromStore = props.bodyData;\n//!  lấy trực tiếp từ store. Vì ở đây rows đc khởi tạo với useState nên nếu như\n//! ko thực hiện hàm set của nó thì dù store có thay đổi state thì nó cũng ko tự trigger render\n// React.useEffect(() => {\n//   console.log(\"Đã vào effect\", rowWithDataFromStore);\n//   setRows(rowWithDataFromStore);\n// }, rowWithDataFromStore);\n//* Dùng để thông báo rằng những field ko cần phải show ở table\nvar _React$useState5=React.useState(\"asc\"),_React$useState6=_slicedToArray(_React$useState5,2),order=_React$useState6[0],setOrder=_React$useState6[1];var _React$useState7=React.useState(\"calories\"),_React$useState8=_slicedToArray(_React$useState7,2),orderBy=_React$useState8[0],setOrderBy=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),selected=_React$useState10[0],setSelected=_React$useState10[1];var removeRows=useSelector(function(state){return removeAdvanceRecord(state,selected);});var _React$useState11=React.useState(0),_React$useState12=_slicedToArray(_React$useState11,2),page=_React$useState12[0],setPage=_React$useState12[1];var _React$useState13=React.useState(false),_React$useState14=_slicedToArray(_React$useState13,2),dense=_React$useState14[0],setDense=_React$useState14[1];var _React$useState15=React.useState(5),_React$useState16=_slicedToArray(_React$useState15,2),rowsPerPage=_React$useState16[0],setRowsPerPage=_React$useState16[1];/**\r\n   * * Phần này dùng để hiển thị dữ liệu ở body khớp với header mà ko cần quan tâm đến tổ chức của object thế nào\r\n   */var handleRequestSort=function handleRequestSort(event,property){var isAsc=orderBy===property&&order===\"asc\";setOrder(isAsc?\"desc\":\"asc\");setOrderBy(property);};/**\r\n   * tác dụng là mở modal và điền account id đc click\r\n   * @param {*} accountID \r\n   */function setSelectedAccountIDandOpenModal(accountID){dispatch(setVisible(true));dispatch(setSelectedAccountID(accountID));}//! tam thoi chua dung den all click\nvar handleSelectAllClick=function handleSelectAllClick(event){if(event.target.checked){var newSelecteds=rows.map(function(n){return n.name;});return;}};// ! Hàm này sẽ nhận name của cái row đc click và truyền đến trang edit\n// const handleEdit = (selectedRowName) => {\n//   console.log(\"user role=\", userRole);\n//   if (userRole == variable.fleetManagerRole) {\n//     history.push(variable.fleetmanager + `/truckform/:name${selectedRowName}`);\n//     history.push({\n//       pathname: variable.fleetmanager + \"/truckform\",\n//       search: `?name=${selectedRowName}`,\n//     });\n//   }\n// };\n/**\r\n   * ! row sẽ tượng trưng cái row đc click\r\n   * @param {*} event\r\n   * @param {*} row\r\n   */var handleClick=function handleClick(event,row){console.log(\"[]\",[variable.userName],\" ko có []\",variable.userName);var name=row.username;var selectedIndex=selected.indexOf(name);var newSelected=[];if(selectedIndex===-1){newSelected=newSelected.concat(selected,name);}else if(selectedIndex===0){newSelected=newSelected.concat(selected.slice(1));}else if(selectedIndex===selected.length-1){newSelected=newSelected.concat(selected.slice(0,-1));}else if(selectedIndex>0){newSelected=newSelected.concat(selected.slice(0,selectedIndex),selected.slice(selectedIndex+1));}// ! tam thoi ta se trien khai tren store\nsetSelected(newSelected);console.log(\"đc lua\",selected);};// const deleteRow = () => {\n//   console.log(\"row moi: \", selected);\n//   dispatch(removeAdvanceRecordSelected(selected));\n//   //! tìm ra những row đc lựa chọng\n// };\nvar lockRow=function lockRow(){console.log(\"row moi: \",selected);var getUnlock=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function getUnlock(){return _ref.apply(this,arguments);};}();};var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(parseInt(event.target.value,10));setPage(0);};var handleChangeDense=function handleChangeDense(event){setDense(event.target.checked);};var isSelected=function isSelected(name){return selected.indexOf(name)!==-1;};var emptyRows=rowsPerPage-Math.min(rowsPerPage,rows.length-page*rowsPerPage);var formik=useFormik({initialValues:{searchvalue:\"\",filtervalue:\"Name\"},onSubmit:function onSubmit(values){console.log(\"search value\",values);switch(values[\"filtervalue\"]){case\"Name\":// console.log(\n//   setRows(getAdvanceDataByNameSearch(rows, values[\"searchvalue\"]))\n// );\n// setRows(getAdvanceDataByNameSearch(rows, values[\"searchvalue\"]));\nbreak;case\" Age\":console.log(\"result\",values[\"filtervalue\"]);break;}}});return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(Box,{height:10}),/*#__PURE__*/React.createElement(TableContainer,null,/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-labelledby\":\"tableTitle\",size:dense?\"small\":\"medium\",\"aria-label\":\"enhanced table\"},/*#__PURE__*/React.createElement(EnhancedTableHead,{classes:classes,numSelected:selected.length,order:order,orderBy:orderBy,onSelectAllClick:handleSelectAllClick,onRequestSort:handleRequestSort,rowCount:rows.length,headCells:props.headCells,actionButtonList:actionButtonList}),/*#__PURE__*/React.createElement(TableBody,null,stableSort(rows,getComparator(order,orderBy)).slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(row,index){var isItemSelected=isSelected(row[variable.userName]);var labelId=\"enhanced-table-checkbox-\".concat(index);var objectInArr=[];//! cái array này sẽ chứa\nvar finalArray=[];//! cái array sau khi đã đc xử lí để hiển thị\nfor(var key in row){objectInArr.push({key:key,value:row[key]});}/**\r\n                   * * Phần này giúp cho dữ liệu body luôn hiển thị đúng với header\r\n                   */headCells.map(function(obj){objectInArr.map(function(cell){if(obj.id===cell.key){//! phần tử trong mảng final có 2 cái, đặc biệt là numeric giúp cho việc hiển thị giữa dữ liệu chữ và số đẹp hơn ở mỗi row của table\nfinalArray.push({key:cell.key,value:cell.value,numeric:obj.numeric});}});});// //* kết thúc\nreturn/*#__PURE__*/React.createElement(StyledTableRow,{hover:true,role:\"checkbox\",\"aria-checked\":isItemSelected,tabIndex:-1,key:row[variable.userName],selected:isItemSelected},actionButtonList.map(function(obj){// Nếu action button thuộc loại remove sẽ đc làm riêng\nif(obj==\"remove\"){return/*#__PURE__*/React.createElement(StyledTableCell,{padding:\"checkbox\"},/*#__PURE__*/React.createElement(Checkbox,{checked:isItemSelected,inputProps:{\"aria-labelledby\":labelId},onClick:function onClick(event){return handleClick(event,row);}}));}return/*#__PURE__*/React.createElement(ActionButton,{name:obj,row:row});}),finalArray.map(function(obj,index){if(obj.numeric==false){return/*#__PURE__*/React.createElement(StyledTableCell,{component:\"th\",id:labelId,scope:\"row\",padding:\"none\"},obj.value);}else{// *Ta sẽ đc xem chi tiết những bài đăng nào bị report nhờ vào dòng code này\nif(obj.key==variable.numberOfReport){return/*#__PURE__*/React.createElement(StyledTableCell,{align:\"right\"},/*#__PURE__*/React.createElement(TextButton,{text:obj.value,click:function click(){return setSelectedAccountIDandOpenModal(row[variable.id]);}}));}else{return/*#__PURE__*/React.createElement(StyledTableCell,{align:\"right\"},obj.value);}}}));}),emptyRows>0&&/*#__PURE__*/React.createElement(TableRow,{style:{height:(dense?33:53)*emptyRows}},/*#__PURE__*/React.createElement(TableCell,{colSpan:7}))),/*#__PURE__*/React.createElement(TableFooter,null,/*#__PURE__*/React.createElement(TableRow,{style:{border:\"none\"}},/*#__PURE__*/React.createElement(TableCell,{colSpan:3,size:\"small\",style:{padding:0}},/*#__PURE__*/React.createElement(\"div\",null,selected.length>0?/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"row\",alignItems:\"center\"}},/*#__PURE__*/React.createElement(\"p\",{style:{fontSize:14,margin:0,paddingLeft:10,color:variable.materialSecondaryColorMain}},selected.length,\" \\u0111\\u01B0\\u1EE3c ch\\u1ECDn\"),/*#__PURE__*/React.createElement(UnclockButton,{click:lockRow})):/*#__PURE__*/React.createElement(Typography,{style:{flex:\"1 1 100%\"},variant:\"h6\",id:\"tableTitle\",component:\"div\"},/*#__PURE__*/React.createElement(\"p\",null)))),/*#__PURE__*/React.createElement(TableCell,{colSpan:8,size:\"small\",style:{padding:0}},/*#__PURE__*/React.createElement(TablePagination,{style:{fontSize:14},rowsPerPageOptions:[5,10,25],component:\"div\",count:rows.length,labelRowsPerPage:/*#__PURE__*/React.createElement(\"p\",{style:normalPElement},\"Rows per page:\"),labelDisplayedRows:function labelDisplayedRows(_ref2){var from=_ref2.from,to=_ref2.to,count=_ref2.count;return/*#__PURE__*/React.createElement(\"p\",{style:normalPElement},from,\"-\",to,\" of \",count!==-1?count:\"more than\"+to);},rowsPerPage:rowsPerPage,page:page,onChangePage:handleChangePage,onChangeRowsPerPage:handleChangeRowsPerPage}))))))));}","map":{"version":3,"sources":["C:/Users/Sam/Documents/GitHub/Capstone-Spring-2021/src/components/SuperTable/AdvanceTable.js"],"names":["faLock","faLockOpen","FontAwesomeIcon","Box","TableFooter","Checkbox","IconButton","Paper","lighten","makeStyles","Table","TableBody","TableCell","TableContainer","TablePagination","TableRow","Toolbar","Tooltip","Typography","DeleteIcon","setVisible","TextButton","FilterListIcon","clsx","useFormik","React","useDispatch","useSelector","useHistory","styled","DeleteButton","UnclockButton","SearchOption","getLocked","removeAdvanceRecordSelected","setSelectedAccountID","getAdvanceData","getAdvanceDataByNameSearch","removeAdvanceRecord","getReportedListByAccountId","variable","EnhancedTableHead","StyledTableCell","StyledTableRow","ActionButton","NormalPElement","p","normalPElement","fontSize","margin","descendingComparator","a","b","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","map","el","index","sort","useToolbarStyles","theme","root","paddingLeft","spacing","paddingRight","highlight","palette","type","color","secondary","main","backgroundColor","light","text","primary","dark","title","flex","EnhancedTableToolbar","props","classes","numSelected","useStyles","width","paper","marginBottom","table","minWidth","borderCollapse","visuallyHidden","border","clip","height","overflow","padding","position","top","EnhancedTable","headCells","rowWithDataFromStore","bodyData","actionButtonList","actionbuttonlist","useState","rows","setRows","directRowBody","state","dispatch","history","isLock","setIsLock","setOrder","setOrderBy","selected","setSelected","removeRows","page","setPage","dense","setDense","rowsPerPage","setRowsPerPage","handleRequestSort","event","property","isAsc","setSelectedAccountIDandOpenModal","accountID","handleSelectAllClick","target","checked","newSelecteds","n","name","handleClick","row","console","log","userName","username","selectedIndex","indexOf","newSelected","concat","slice","length","lockRow","getUnlock","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","value","handleChangeDense","isSelected","emptyRows","Math","min","formik","initialValues","searchvalue","filtervalue","onSubmit","values","isItemSelected","labelId","objectInArr","finalArray","key","push","obj","cell","id","numeric","numberOfReport","display","flexDirection","alignItems","materialSecondaryColorMain","from","to","count"],"mappings":"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","sourcesContent":["import { faLock, faLockOpen } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Box, TableFooter, Checkbox } from \"@material-ui/core\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport { setVisible } from \"redux/index\";\r\nimport TextButton from \"components/MaterialComponent/TextButton\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport clsx from \"clsx\";\r\nimport { useFormik } from \"formik\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport { DeleteButton ,UnclockButton} from \"../../components/CustomButton/CustomButton\";\r\nimport SearchOption from \"../../components/FilterOption/SearchOption/SearchBar\";\r\nimport { getLocked, removeAdvanceRecordSelected,setSelectedAccountID } from \"../../redux\";\r\nimport {\r\n  getAdvanceData,\r\n  getAdvanceDataByNameSearch,\r\n  removeAdvanceRecord,\r\n  getReportedListByAccountId\r\n} from \"../../redux/Selector/Selectors\";\r\nimport * as variable from \"../../variables/Variables\";\r\nimport EnhancedTableHead from \"../SuperTable/Header/AdvanceHeader\";\r\nimport { StyledTableCell } from \"./StyledCell\";\r\nimport { StyledTableRow } from \"./StyledRow\";\r\nimport ActionButton from \"components/SuperTable/ActionButton\";\r\n\r\nconst NormalPElement = styled.p`\r\n  font-size: 14px;\r\n  margin: 0px;\r\n`;\r\nconst normalPElement = {\r\n  fontSize: 14,\r\n  margin: 0,\r\n};\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === \"desc\"\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === \"light\"\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: \"1 1 100%\",\r\n  },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const { numSelected } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"inherit\"\r\n          variant=\"subtitle1\"\r\n          component=\"div\"\r\n        >\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"h6\"\r\n          id=\"tableTitle\"\r\n          component=\"div\"\r\n        >\r\n          Nutrition\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip title=\"Filter list\">\r\n          <IconButton aria-label=\"filter list\">\r\n            <FilterListIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    \"& .MuiSelect-root\": {\r\n      fontSize: 14,\r\n      margin: 0,\r\n    },\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    // fontSize:14,\r\n    minWidth: 750,\r\n    borderCollapse: \"collapse\",\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTable(props) {\r\n  const { headCells } = props;\r\n  const classes = useStyles();\r\n  // ! row này sẽ đại diện cho dữ liệu lấy trực tiếp từ store (global)\r\n  const rowWithDataFromStore = props.bodyData;\r\n  const actionButtonList = props.actionbuttonlist;\r\n\r\n  // * cái row ở bên store truyền từ bên component vào\r\n  const [rows, setRows] = React.useState(props.bodyData);\r\n  // const rows =props.bodyData;\r\n\r\n  //* cái row ở trực tiếp bên store luôn\r\n  let directRowBody = useSelector((state) => getAdvanceData(state));\r\n\r\n  const dispatch = useDispatch();\r\n  let history = useHistory(); // ! history object\r\n\r\n  // * Dùng để đánh dấu account đang bị lock\r\n  const [isLock, setIsLock] = React.useState(0);\r\n\r\n  // ! Dùng để kiểm tra sự thay đổi của  const rowWithDataFromStore = props.bodyData;\r\n  //!  lấy trực tiếp từ store. Vì ở đây rows đc khởi tạo với useState nên nếu như\r\n  //! ko thực hiện hàm set của nó thì dù store có thay đổi state thì nó cũng ko tự trigger render\r\n  // React.useEffect(() => {\r\n  //   console.log(\"Đã vào effect\", rowWithDataFromStore);\r\n  //   setRows(rowWithDataFromStore);\r\n  // }, rowWithDataFromStore);\r\n\r\n  //* Dùng để thông báo rằng những field ko cần phải show ở table\r\n\r\n  const [order, setOrder] = React.useState(\"asc\");\r\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\r\n\r\n  const [selected, setSelected] = React.useState([]);\r\n\r\n  const removeRows = useSelector((state) =>\r\n    removeAdvanceRecord(state, selected)\r\n  );\r\n\r\n  const [page, setPage] = React.useState(0);\r\n  const [dense, setDense] = React.useState(false);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(5);\r\n\r\n\r\n  /**\r\n   * * Phần này dùng để hiển thị dữ liệu ở body khớp với header mà ko cần quan tâm đến tổ chức của object thế nào\r\n   */\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === \"asc\";\r\n    setOrder(isAsc ? \"desc\" : \"asc\");\r\n    setOrderBy(property);\r\n  };\r\n\r\n  /**\r\n   * tác dụng là mở modal và điền account id đc click\r\n   * @param {*} accountID \r\n   */\r\n  function setSelectedAccountIDandOpenModal(accountID){\r\n       dispatch(setVisible(true))\r\n       dispatch(setSelectedAccountID(accountID))\r\n  }\r\n  //! tam thoi chua dung den all click\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = rows.map((n) => n.name);\r\n      return;\r\n    }\r\n  };\r\n\r\n  // ! Hàm này sẽ nhận name của cái row đc click và truyền đến trang edit\r\n  // const handleEdit = (selectedRowName) => {\r\n  //   console.log(\"user role=\", userRole);\r\n  //   if (userRole == variable.fleetManagerRole) {\r\n  //     history.push(variable.fleetmanager + `/truckform/:name${selectedRowName}`);\r\n  //     history.push({\r\n  //       pathname: variable.fleetmanager + \"/truckform\",\r\n  //       search: `?name=${selectedRowName}`,\r\n  //     });\r\n  //   }\r\n  // };\r\n\r\n  /**\r\n   * ! row sẽ tượng trưng cái row đc click\r\n   * @param {*} event\r\n   * @param {*} row\r\n   */\r\n  const handleClick = (event, row) => {\r\n    console.log(\"[]\", [variable.userName], \" ko có []\", variable.userName);\r\n    const { username: name } = row;\r\n    const selectedIndex = selected.indexOf(name);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, name);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n\r\n    // ! tam thoi ta se trien khai tren store\r\n    setSelected(newSelected);\r\n    console.log(\"đc lua\", selected);\r\n  };\r\n\r\n  // const deleteRow = () => {\r\n  //   console.log(\"row moi: \", selected);\r\n  //   dispatch(removeAdvanceRecordSelected(selected));\r\n  //   //! tìm ra những row đc lựa chọng\r\n  // };\r\n  const lockRow = () => {\r\n    console.log(\"row moi: \", selected);\r\n    const getUnlock=async ()=>{\r\n      // const res=await dispatch(isAccept())\r\n\r\n    }\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleChangeDense = (event) => {\r\n    setDense(event.target.checked);\r\n  };\r\n\r\n  const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n  const emptyRows =\r\n    rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      searchvalue: \"\",\r\n      filtervalue: \"Name\",\r\n    },\r\n    onSubmit: (values) => {\r\n      console.log(\"search value\", values);\r\n      switch (values[\"filtervalue\"]) {\r\n        case \"Name\":\r\n          // console.log(\r\n          //   setRows(getAdvanceDataByNameSearch(rows, values[\"searchvalue\"]))\r\n          // );\r\n          // setRows(getAdvanceDataByNameSearch(rows, values[\"searchvalue\"]));\r\n          break;\r\n        case \" Age\":\r\n          console.log(\"result\", values[\"filtervalue\"]);\r\n          break;\r\n      }\r\n    },\r\n  });\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        {/* <SearchOption formikAction={formik} /> */}\r\n        <Box height={10} />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size={dense ? \"small\" : \"medium\"}\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={rows.length}\r\n              headCells={props.headCells}\r\n              actionButtonList={actionButtonList}\r\n            />\r\n            <TableBody>\r\n              {stableSort(rows, getComparator(order, orderBy))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map((row, index) => {\r\n                  const isItemSelected = isSelected(row[variable.userName]);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n                  const objectInArr = []; //! cái array này sẽ chứa\r\n                  const finalArray = []; //! cái array sau khi đã đc xử lí để hiển thị\r\n                  for (const key in row) {\r\n                    objectInArr.push({\r\n                      key: key,\r\n                      value: row[key],\r\n                    });\r\n                  }\r\n                  /**\r\n                   * * Phần này giúp cho dữ liệu body luôn hiển thị đúng với header\r\n                   */\r\n                  headCells.map((obj) => {\r\n                    objectInArr.map((cell) => {\r\n                      if (obj.id === cell.key) {\r\n                        //! phần tử trong mảng final có 2 cái, đặc biệt là numeric giúp cho việc hiển thị giữa dữ liệu chữ và số đẹp hơn ở mỗi row của table\r\n                        finalArray.push({\r\n                        \r\n                          key: cell.key,\r\n                          value: cell.value,\r\n                          numeric: obj.numeric,\r\n                        });\r\n                      }\r\n                    });\r\n                  });\r\n                  // //* kết thúc\r\n                  return (\r\n                    <StyledTableRow\r\n                      hover\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={row[variable.userName]}\r\n                      selected={isItemSelected}\r\n                    >\r\n                      {actionButtonList.map((obj) => {\r\n                        // Nếu action button thuộc loại remove sẽ đc làm riêng\r\n                        if (obj == \"remove\") {\r\n                          return (\r\n                            <StyledTableCell padding=\"checkbox\">\r\n                              <Checkbox\r\n                                checked={isItemSelected}\r\n                                inputProps={{ \"aria-labelledby\": labelId }}\r\n                                onClick={(event) => handleClick(event, row)}\r\n                              />\r\n                            </StyledTableCell>\r\n                          );\r\n                        }\r\n                        return <ActionButton name={obj} row={row} />;\r\n                      })}\r\n\r\n                      {finalArray.map((obj, index) => {\r\n                        if (obj.numeric == false) {\r\n                          return (\r\n                            <StyledTableCell\r\n                              component=\"th\"\r\n                              id={labelId}\r\n                              scope=\"row\"\r\n                              padding=\"none\"\r\n                            >\r\n                              {obj.value}\r\n                            </StyledTableCell>\r\n                          );\r\n                        } else {\r\n                          // *Ta sẽ đc xem chi tiết những bài đăng nào bị report nhờ vào dòng code này\r\n                          if (obj.key == variable.numberOfReport) {\r\n                            return (\r\n                              <StyledTableCell align=\"right\">\r\n                                <TextButton\r\n                                  text={obj.value}\r\n                                  click={() => setSelectedAccountIDandOpenModal(row[variable.id])}\r\n                                ></TextButton>\r\n                              </StyledTableCell>\r\n                            );\r\n                          } else {\r\n                            return (\r\n                              <StyledTableCell align=\"right\">\r\n                                {obj.value}\r\n                              </StyledTableCell>\r\n                            );\r\n                          }\r\n                        }\r\n                      })}\r\n                    </StyledTableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\r\n                  <TableCell colSpan={7} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n            <TableFooter>\r\n              <TableRow style={{ border: \"none\" }}>\r\n                <TableCell colSpan={3} size=\"small\" style={{ padding: 0 }}>\r\n                  <div>\r\n                    {selected.length > 0 ? (\r\n                      <div\r\n                        style={{\r\n                          display: \"flex\",\r\n                          flexDirection: \"row\",\r\n                          alignItems: \"center\",\r\n                        }}\r\n                      >\r\n                        <p\r\n                          style={{\r\n                            fontSize: 14,\r\n                            margin: 0,\r\n                            paddingLeft: 10,\r\n                            color: variable.materialSecondaryColorMain,\r\n                          }}\r\n                        >\r\n                          {selected.length} được chọn\r\n                        </p>\r\n                        {/* <DeleteButton click={deleteRow} /> */}\r\n                        <UnclockButton click={lockRow} />\r\n                        \r\n                      </div>\r\n                    ) : (\r\n                      <Typography\r\n                        style={{ flex: \"1 1 100%\" }}\r\n                        variant=\"h6\"\r\n                        id=\"tableTitle\"\r\n                        component=\"div\"\r\n                      >\r\n                        <p></p>\r\n                      </Typography>\r\n                    )}\r\n                  </div>\r\n                </TableCell>\r\n                <TableCell colSpan={8} size={\"small\"} style={{ padding: 0 }}>\r\n                  <TablePagination\r\n                    style={{ fontSize: 14 }}\r\n                    rowsPerPageOptions={[5, 10, 25]}\r\n                    component=\"div\"\r\n                    count={rows.length}\r\n                    labelRowsPerPage={\r\n                      <p style={normalPElement}>Rows per page:</p>\r\n                    }\r\n                    labelDisplayedRows={({ from, to, count }) => (\r\n                      <p style={normalPElement}>\r\n                        {from}-{to}\r\n                        {\" of \"}\r\n                        {count !== -1 ? count : \"more than\" + to}\r\n                      </p>\r\n                    )}\r\n                    rowsPerPage={rowsPerPage}\r\n                    page={page}\r\n                    onChangePage={handleChangePage}\r\n                    onChangeRowsPerPage={handleChangeRowsPerPage}\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n            </TableFooter>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n      {/* <FormControlLabel\r\n        control={<Switch checked={dense} onChange={handleChangeDense} />}\r\n        label=\"Dense padding\"\r\n      /> */}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}