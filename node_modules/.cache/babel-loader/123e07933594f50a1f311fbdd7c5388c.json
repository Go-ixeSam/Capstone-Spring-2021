{"ast":null,"code":"import React from\"react\";import{connect}from\"react-redux\";import{Redirect,Route,Switch,withRouter}from\"react-router-dom\";import AdminLayout from\"../src/layouts/Admin.jsx\";import Signin from\"./views/Signin\";import{useDispatch,useSelector}from\"react-redux\";import{getSignInForm,getToken,getTokenExpiredTime}from\"redux/Selector/Selectors\";import*as variable from\"./variables/Variables\";import{logOut}from\"redux/index\";function App(){var token=useSelector(function(state){return getToken(state);});var expiredToken=useSelector(function(state){return getTokenExpiredTime(state);});var dispatch=useDispatch();//* kiểm tra thời hạn của token, nếu hết thì gọi logout\nvar currentTime=new Date();if(currentTime==expiredToken){dispatch(logOut);}else{// console.log(\"current time vẫn ổn\")\n}var number=0;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/admin\",render:function render(props){return token!=\"\"?/*#__PURE__*/React.createElement(AdminLayout,props):/*#__PURE__*/React.createElement(Signin,null);}// (props) => (number == 1 ? <AdminLayout {...props} /> : <Signin />)\n}),/*#__PURE__*/React.createElement(Redirect,{from:\"/\",to:\"/admin/dashboard\"})));}export default App;// const mapStatetoProp = (state) => {\n//   return {\n//     userData: state.user.token,\n//     userRole: state.user.roles.text,\n//   };\n// };\n// export default connect(mapStatetoProp)(withRouter(App));","map":{"version":3,"sources":["C:/Users/Sam/Documents/GitHub/Capstone-Spring-2021/src/App.js"],"names":["React","connect","Redirect","Route","Switch","withRouter","AdminLayout","Signin","useDispatch","useSelector","getSignInForm","getToken","getTokenExpiredTime","variable","logOut","App","token","state","expiredToken","dispatch","currentTime","Date","number","props"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,QAAT,CAAmBC,KAAnB,CAA0BC,MAA1B,CAAkCC,UAAlC,KAAoD,kBAApD,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gBAAnB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OACEC,aADF,CAEEC,QAFF,CAGEC,mBAHF,KAIO,0BAJP,CAKA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,uBAA1B,CACA,OAASC,MAAT,KAAuB,aAAvB,CACA,QAASC,CAAAA,GAAT,EAAe,CACb,GAAMC,CAAAA,KAAK,CAAGP,WAAW,CAAC,SAACQ,KAAD,QAAWN,CAAAA,QAAQ,CAACM,KAAD,CAAnB,EAAD,CAAzB,CACA,GAAMC,CAAAA,YAAY,CAAGT,WAAW,CAAC,SAACQ,KAAD,QAAWL,CAAAA,mBAAmB,CAACK,KAAD,CAA9B,EAAD,CAAhC,CACA,GAAME,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA;AACA,GAAIY,CAAAA,WAAW,CAAG,GAAIC,CAAAA,IAAJ,EAAlB,CACA,GAAID,WAAW,EAAIF,YAAnB,CAAiC,CAC/BC,QAAQ,CAACL,MAAD,CAAR,CACD,CAFD,IAEO,CACL;AACD,CACD,GAAMQ,CAAAA,MAAM,CAAG,CAAf,CACA,mBACE,4CACE,oBAAC,MAAD,mBACE,oBAAC,KAAD,EACE,IAAI,CAAC,QADP,CAEE,MAAM,CACJ,gBAACC,KAAD,QAAYP,CAAAA,KAAK,EAAI,EAAT,cAAc,oBAAC,WAAD,CAAiBO,KAAjB,CAAd,cAA2C,oBAAC,MAAD,MAAvD,EACA;AAJJ,EADF,cAQE,oBAAC,QAAD,EAAU,IAAI,CAAC,GAAf,CAAmB,EAAE,CAAC,kBAAtB,EARF,CADF,CADF,CAcD,CACD,cAAeR,CAAAA,GAAf,CACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, Route, Switch, withRouter } from \"react-router-dom\";\r\nimport AdminLayout from \"../src/layouts/Admin.jsx\";\r\nimport Signin from \"./views/Signin\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  getSignInForm,\r\n  getToken,\r\n  getTokenExpiredTime,\r\n} from \"redux/Selector/Selectors\";\r\nimport * as variable from \"./variables/Variables\";\r\nimport { logOut } from \"redux/index\";\r\nfunction App() {\r\n  const token = useSelector((state) => getToken(state));\r\n  const expiredToken = useSelector((state) => getTokenExpiredTime(state));\r\n  const dispatch = useDispatch();\r\n  //* kiểm tra thời hạn của token, nếu hết thì gọi logout\r\n  let currentTime = new Date();\r\n  if (currentTime == expiredToken) {\r\n    dispatch(logOut);\r\n  } else {\r\n    // console.log(\"current time vẫn ổn\")\r\n  }\r\n  const number = 0;\r\n  return (\r\n    <div>\r\n      <Switch>\r\n        <Route\r\n          path=\"/admin\"\r\n          render={\r\n            (props) => (token != \"\" ? <AdminLayout {...props} /> : <Signin />)\r\n            // (props) => (number == 1 ? <AdminLayout {...props} /> : <Signin />)\r\n          }\r\n        />\r\n        <Redirect from=\"/\" to=\"/admin/dashboard\" />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\nexport default App;\r\n// const mapStatetoProp = (state) => {\r\n//   return {\r\n//     userData: state.user.token,\r\n//     userRole: state.user.roles.text,\r\n//   };\r\n// };\r\n// export default connect(mapStatetoProp)(withRouter(App));\r\n"]},"metadata":{},"sourceType":"module"}