{"ast":null,"code":"import _objectSpread from\"E:\\\\light-bootstrap-dashboard-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:\\\\light-bootstrap-dashboard-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";/*!\n\n=========================================================\n* Light Bootstrap Dashboard React - v1.3.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/light-bootstrap-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/light-bootstrap-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/import React,{Component,useState}from\"react\";import{Route,Switch}from\"react-router-dom\";import NotificationSystem from\"react-notification-system\";import{connect}from\"react-redux\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory,useLocation}from\"react-router-dom\";import AdminNavbar from\"components/Navbars/AdminNavbar\";import Footer from\"components/Footer/Footer\";import Sidebar from\"components/Sidebar/Sidebar\";import FixedPlugin from\"components/FixedPlugin/FixedPlugin.jsx\";import firebase from\"util/firebase\";import{addObject}from\"redux/index\";import{style}from\"variables/Variables.jsx\";import routes from\"routes.js\";import imageSide from\"assets/img/sidebar-3.jpg\";import{array,object}from\"yup/lib/locale\";import{useRef}from\"react\";import{getFirebase}from\"redux/Selector/Selectors\";// class Admin extends Component {\nvar Admin=function Admin(props){// constructor(props) {\n//   super(props);\n//   this.notify = null;\n//   this.setNotify = (element) => {\n//     this.notify = element;\n//   };\n//   this.state = {\n//     _notificationSystem: null,\n//     image: image,\n//     color: \"black\",\n//     hasImage: true,\n//     fixedClasses: \"dropdown show-dropdown open\",\n//   };\n// }\n// const { notify, setNotify } = React.useState(null);\nvar _useState=useState(imageSide),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(\"black\"),_useState4=_slicedToArray(_useState3,2),color=_useState4[0],setColor=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),hasImage=_useState6[0],setHasImage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),isNotify=_useState8[0],setIsNotify=_useState8[1];// ! cái này dùng để ngăn cho việc notification nổ lần đầu tiên khi hàng của store đc thêm vào lần đầu tiên\nvar _useState9=useState(\"dropdown show-dropdown open\"),_useState10=_slicedToArray(_useState9,2),fixedClasses=_useState10[0],setFixedClasses=_useState10[1];var history=useHistory();var location=useLocation();var mainPanel=useRef();var notify=useRef();var dataInFirebase=useSelector(function(state){return getFirebase(state);});var dispatch=useDispatch();//! Hàm này có tác dụng là tạo ra một notification, ta sẽ dùng hàm này cứ mỗi khi firebase bắt\n//! sự kiện\nvar addNotify=function addNotify(){var color=Math.floor(Math.random()*4+1);var level;var notification=notify.current;switch(color){case 1:level=\"success\";break;case 2:level=\"warning\";break;case 3:level=\"error\";break;case 4:level=\"info\";break;default:break;}notification.addNotification({title:/*#__PURE__*/React.createElement(\"span\",{\"data-notify\":\"icon\",className:\"pe-7s-gift\"}),message:/*#__PURE__*/React.createElement(\"div\",null,\"Welcome to \",/*#__PURE__*/React.createElement(\"b\",null,\"Light Bootstrap Dashboard\"),\" - a beautiful freebie for every web developer.\"),level:level,position:\"tr\",autoDismiss:15});};// handleNotificationClick = (position) => {\n//   var color = Math.floor(Math.random() * 4 + 1);\n//   var level;\n//   switch (color) {\n//     case 1:\n//       level = \"success\";\n//       break;\n//     case 2:\n//       level = \"warning\";\n//       break;\n//     case 3:\n//       level = \"error\";\n//       break;\n//     case 4:\n//       level = \"info\";\n//       break;\n//     default:\n//       break;\n//   }\n//   this.state._notificationSystem.addNotification({\n//     title: <span data-notify=\"icon\" className=\"pe-7s-gift\" />,\n//     message: (\n//       <div>\n//         Welcome to <b>Light Bootstrap Dashboard</b> - a beautiful freebie for\n//         every web developer.\n//       </div>\n//     ),\n//     level: level,\n//     position: position,\n//     autoDismiss: 15,\n//   });\n// };\nvar getRoutes=function getRoutes(routes){return routes.map(function(prop,key){if(prop.layout===\"/admin\"){return/*#__PURE__*/React.createElement(Route,{path:prop.layout+prop.path,render:function render(props){return/*#__PURE__*/React.createElement(prop.component,props);},key:key});}else{return null;}});};var getBrandText=function getBrandText(path){for(var i=0;i<routes.length;i++){if(props.location.pathname.indexOf(routes[i].layout+routes[i].path)!==-1){return routes[i].name;}}return\"Brand\";};var handleImageClick=function handleImageClick(image){// this.setState({ image: image });\nsetImage(image);};var handleColorClick=function handleColorClick(color){// this.setState({ color: color });\nsetColor(color);};var handleHasImage=function handleHasImage(hasImage){// this.setState({ hasImage: hasImage });\nsetHasImage(hasImage);};var handleFixedClick=function handleFixedClick(){// if (this.state.fixedClasses === \"dropdown\") {\nif(fixedClasses===\"dropdown\"){// this.setState({ fixedClasses: \"dropdown show-dropdown open\" });\nsetFixedClasses(\"dropdown show-dropdown open\");}else{// this.setState({ fixedClasses: \"dropdown\" });\nsetFixedClasses(\"dropdown\");}};// React.useEffect(() => {\n//   addNotify();\n// }, [dataInFirebase]);\nReact.useEffect(function(){console.log(\"arrr= \",dataInFirebase.firebaseData);firebaseListening();return function(){removeFirebaseListening();};},[]);React.useEffect(function(){setIsNotify(isNotify+1);if(dataInFirebase.firebaseData.length!=0&&isNotify==2){addNotify();}},[dataInFirebase]);React.useEffect(function(){if(window.innerWidth<993&&// e.history.location.pathname !== e.location.pathname &&\nhistory.location.pathname!==location.pathname&&document.documentElement.className.indexOf(\"nav-open\")!==-1){document.documentElement.classList.toggle(\"nav-open\");}if(history.action===\"PUSH\"){document.documentElement.scrollTop=0;document.scrollingElement.scrollTop=0;mainPanel.scrollTop=0;}},[mainPanel]);// componentDidMount() {\n// }\n// componentDidUpdate(e) {\n//   if (\n//     window.innerWidth < 993 &&\n//     e.history.location.pathname !== e.location.pathname &&\n//     document.documentElement.className.indexOf(\"nav-open\") !== -1\n//   ) {\n//     document.documentElement.classList.toggle(\"nav-open\");\n//   }\n//   if (e.history.action === \"PUSH\") {\n//     document.documentElement.scrollTop = 0;\n//     document.scrollingElement.scrollTop = 0;\n//     mainPanel.scrollTop = 0;\n//   }\n// }\n// componentWillUnmount() {\n//   this.removeFirebaseListening();\n// }\n// ! Lắng nghe sự thay đổi của database trên firebase\nvar firebaseListening=function firebaseListening(params){var userCount=firebase.database().ref(\"users\");userCount.on(\"value\",function(snapshot){var newArr=[];// ? Vì snapshot sẽ chỉ trả về các obj nên ta muốn nó thành 1 array ta phải làm bằng tay, chi tiết thế nào thì coi trong quick note\nsnapshot.forEach(function(child){newArr.push(_objectSpread(_objectSpread({},child.val()),{},{userId:child.key}));});dispatch(addObject(newArr));});};function removeFirebaseListening(params){firebase.database().ref(\"user\").off(\"value\");}// render() {\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper\"},/*#__PURE__*/React.createElement(NotificationSystem,{ref:notify,style:style}),/*#__PURE__*/React.createElement(Sidebar,Object.assign({},props,{routes:routes// image={this.state.image}\n// color={this.state.color}\n// hasImage={this.state.hasImage}\n,image:image,color:color,hasImage:hasImage})),/*#__PURE__*/React.createElement(\"div\",{id:\"main-panel\",className:\"main-panel\",ref:mainPanel},/*#__PURE__*/React.createElement(AdminNavbar,Object.assign({},props,{brandText:getBrandText(props.location.pathname)})),/*#__PURE__*/React.createElement(Switch,null,getRoutes(routes)),/*#__PURE__*/React.createElement(Footer,null)));};// }\n//Có tác dụng select ra những state cần xử lí\n/**\n * state này là của redux, và chữ fn đóng vai trò là 1 props\n * fn có giá trị là state.full_name của redux\n * @param {} state\n */ // const mapStateToProps = (state) => {\n//   return {\n//     firebase: state.firebase,\n//   };\n// };\n// const mapDispatchToProps = dispatch => {\n//   return {\n//   }\n// };\n// export default connect(mapStateToProps, { addObject })(Admin);\nexport default Admin;","map":{"version":3,"sources":["E:/light-bootstrap-dashboard-react-master/src/layouts/Admin.jsx"],"names":["React","Component","useState","Route","Switch","NotificationSystem","connect","useDispatch","useSelector","useHistory","useLocation","AdminNavbar","Footer","Sidebar","FixedPlugin","firebase","addObject","style","routes","imageSide","array","object","useRef","getFirebase","Admin","props","image","setImage","color","setColor","hasImage","setHasImage","isNotify","setIsNotify","fixedClasses","setFixedClasses","history","location","mainPanel","notify","dataInFirebase","state","dispatch","addNotify","Math","floor","random","level","notification","current","addNotification","title","message","position","autoDismiss","getRoutes","map","prop","key","layout","path","getBrandText","i","length","pathname","indexOf","name","handleImageClick","handleColorClick","handleHasImage","handleFixedClick","useEffect","console","log","firebaseData","firebaseListening","removeFirebaseListening","window","innerWidth","document","documentElement","className","classList","toggle","action","scrollTop","scrollingElement","params","userCount","database","ref","on","snapshot","newArr","forEach","child","push","val","userId","off"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Light Bootstrap Dashboard React - v1.3.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/light-bootstrap-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/light-bootstrap-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React, { Component, useState } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport NotificationSystem from \"react-notification-system\";\nimport { connect } from \"react-redux\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory,useLocation } from \"react-router-dom\";\n\nimport AdminNavbar from \"components/Navbars/AdminNavbar\";\nimport Footer from \"components/Footer/Footer\";\nimport Sidebar from \"components/Sidebar/Sidebar\";\nimport FixedPlugin from \"components/FixedPlugin/FixedPlugin.jsx\";\nimport firebase from \"util/firebase\";\nimport { addObject } from \"redux/index\";\n\nimport { style } from \"variables/Variables.jsx\";\n\nimport routes from \"routes.js\";\n\nimport imageSide from \"assets/img/sidebar-3.jpg\";\nimport { array, object } from \"yup/lib/locale\";\nimport { useRef } from \"react\";\nimport { getFirebase } from \"redux/Selector/Selectors\";\n\n// class Admin extends Component {\nconst Admin = (props) => {\n  // constructor(props) {\n  //   super(props);\n  //   this.notify = null;\n\n  //   this.setNotify = (element) => {\n  //     this.notify = element;\n  //   };\n\n  //   this.state = {\n  //     _notificationSystem: null,\n  //     image: image,\n  //     color: \"black\",\n  //     hasImage: true,\n  //     fixedClasses: \"dropdown show-dropdown open\",\n  //   };\n  // }\n  // const { notify, setNotify } = React.useState(null);\n  const [image, setImage] = useState(imageSide);\n  const [color, setColor] = useState(\"black\");\n  const [hasImage, setHasImage] = useState(true);\n  const [isNotify, setIsNotify] = useState(0); // ! cái này dùng để ngăn cho việc notification nổ lần đầu tiên khi hàng của store đc thêm vào lần đầu tiên\n  const [fixedClasses, setFixedClasses] = useState(\n    \"dropdown show-dropdown open\"\n  );\n  let history = useHistory();\n  let location = useLocation();\n  const mainPanel = useRef();\n  const notify = useRef();\n  const dataInFirebase = useSelector((state) => getFirebase(state));\n  const dispatch = useDispatch();\n\n  //! Hàm này có tác dụng là tạo ra một notification, ta sẽ dùng hàm này cứ mỗi khi firebase bắt\n  //! sự kiện\n  const addNotify = () => {\n    var color = Math.floor(Math.random() * 4 + 1);\n    var level;\n    const notification = notify.current;\n    switch (color) {\n      case 1:\n        level = \"success\";\n        break;\n      case 2:\n        level = \"warning\";\n        break;\n      case 3:\n        level = \"error\";\n        break;\n      case 4:\n        level = \"info\";\n        break;\n      default:\n        break;\n    }\n    notification.addNotification({\n      title: <span data-notify=\"icon\" className=\"pe-7s-gift\" />,\n      message: (\n        <div>\n          Welcome to <b>Light Bootstrap Dashboard</b> - a beautiful freebie for\n          every web developer.\n        </div>\n      ),\n      level: level,\n      position: \"tr\",\n      autoDismiss: 15,\n    });\n  };\n\n  // handleNotificationClick = (position) => {\n  //   var color = Math.floor(Math.random() * 4 + 1);\n  //   var level;\n  //   switch (color) {\n  //     case 1:\n  //       level = \"success\";\n  //       break;\n  //     case 2:\n  //       level = \"warning\";\n  //       break;\n  //     case 3:\n  //       level = \"error\";\n  //       break;\n  //     case 4:\n  //       level = \"info\";\n  //       break;\n  //     default:\n  //       break;\n  //   }\n  //   this.state._notificationSystem.addNotification({\n  //     title: <span data-notify=\"icon\" className=\"pe-7s-gift\" />,\n  //     message: (\n  //       <div>\n  //         Welcome to <b>Light Bootstrap Dashboard</b> - a beautiful freebie for\n  //         every web developer.\n  //       </div>\n  //     ),\n  //     level: level,\n  //     position: position,\n  //     autoDismiss: 15,\n  //   });\n  // };\n  const getRoutes = (routes) => {\n    return routes.map((prop, key) => {\n      if (prop.layout === \"/admin\") {\n        return (\n          <Route\n            path={prop.layout + prop.path}\n            render={(props) => (\n              <prop.component\n                {...props}\n                // handleClick={handleNotificationClick}\n              />\n            )}\n            key={key}\n          />\n        );\n      } else {\n        return null;\n      }\n    });\n  };\n  const getBrandText = (path) => {\n    for (let i = 0; i < routes.length; i++) {\n      if (\n        props.location.pathname.indexOf(routes[i].layout + routes[i].path) !==\n        -1\n      ) {\n        return routes[i].name;\n      }\n    }\n    return \"Brand\";\n  };\n  const handleImageClick = (image) => {\n    // this.setState({ image: image });\n    setImage(image);\n  };\n  const handleColorClick = (color) => {\n    // this.setState({ color: color });\n    setColor(color);\n  };\n  const handleHasImage = (hasImage) => {\n    // this.setState({ hasImage: hasImage });\n    setHasImage(hasImage);\n  };\n  const handleFixedClick = () => {\n    // if (this.state.fixedClasses === \"dropdown\") {\n    if (fixedClasses === \"dropdown\") {\n      // this.setState({ fixedClasses: \"dropdown show-dropdown open\" });\n      setFixedClasses(\"dropdown show-dropdown open\");\n    } else {\n      // this.setState({ fixedClasses: \"dropdown\" });\n      setFixedClasses(\"dropdown\");\n    }\n  };\n\n  // React.useEffect(() => {\n  //   addNotify();\n  // }, [dataInFirebase]);\n\n  React.useEffect(() => {\n    console.log(\"arrr= \", dataInFirebase.firebaseData);\n    firebaseListening();\n    return () => {\n      removeFirebaseListening();\n    };\n  }, []);\n\n  React.useEffect(() => {\n    setIsNotify(isNotify + 1);\n    if (dataInFirebase.firebaseData.length != 0 && isNotify == 2) {\n      addNotify();\n    }\n  }, [dataInFirebase]);\n\n  React.useEffect(() => {\n    if (\n      window.innerWidth < 993 &&\n      // e.history.location.pathname !== e.location.pathname &&\n      history.location.pathname !== location.pathname &&\n      document.documentElement.className.indexOf(\"nav-open\") !== -1\n    ) {\n      document.documentElement.classList.toggle(\"nav-open\");\n    }\n    if (history.action === \"PUSH\") {\n      document.documentElement.scrollTop = 0;\n      document.scrollingElement.scrollTop = 0;\n      mainPanel.scrollTop = 0;\n    }\n  }, [mainPanel]);\n\n  // componentDidMount() {\n  // }\n  // componentDidUpdate(e) {\n  //   if (\n  //     window.innerWidth < 993 &&\n  //     e.history.location.pathname !== e.location.pathname &&\n  //     document.documentElement.className.indexOf(\"nav-open\") !== -1\n  //   ) {\n  //     document.documentElement.classList.toggle(\"nav-open\");\n  //   }\n  //   if (e.history.action === \"PUSH\") {\n  //     document.documentElement.scrollTop = 0;\n  //     document.scrollingElement.scrollTop = 0;\n  //     mainPanel.scrollTop = 0;\n  //   }\n  // }\n  // componentWillUnmount() {\n  //   this.removeFirebaseListening();\n  // }\n\n  // ! Lắng nghe sự thay đổi của database trên firebase\n  const firebaseListening = (params) => {\n    var userCount = firebase.database().ref(\"users\");\n    userCount.on(\"value\", (snapshot) => {\n      let newArr = [];\n      // ? Vì snapshot sẽ chỉ trả về các obj nên ta muốn nó thành 1 array ta phải làm bằng tay, chi tiết thế nào thì coi trong quick note\n      snapshot.forEach((child) => {\n        newArr.push({ ...child.val(), userId: child.key });\n      });\n      dispatch(addObject(newArr));\n    });\n  };\n\n  function removeFirebaseListening(params) {\n    firebase.database().ref(\"user\").off(\"value\");\n  }\n  // render() {\n  return (\n    <div className=\"wrapper\">\n      {/* {console.log(\"arrr= \", dataInFirebase.firebaseData)} */}\n      <NotificationSystem ref={notify} style={style} />\n      <Sidebar\n        {...props}\n        routes={routes}\n        // image={this.state.image}\n        // color={this.state.color}\n        // hasImage={this.state.hasImage}\n        image={image}\n        color={color}\n        hasImage={hasImage}\n      />\n      <div id=\"main-panel\" className=\"main-panel\" ref={mainPanel}>\n        <AdminNavbar\n          {...props}\n          brandText={getBrandText(props.location.pathname)}\n        />\n        <Switch>{getRoutes(routes)}</Switch>\n        <Footer />\n      </div>\n    </div>\n  );\n};\n// }\n\n//Có tác dụng select ra những state cần xử lí\n/**\n * state này là của redux, và chữ fn đóng vai trò là 1 props\n * fn có giá trị là state.full_name của redux\n * @param {} state\n */\n// const mapStateToProps = (state) => {\n//   return {\n//     firebase: state.firebase,\n//   };\n// };\n// const mapDispatchToProps = dispatch => {\n//   return {\n\n//   }\n// };\n\n// export default connect(mapStateToProps, { addObject })(Admin);\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}